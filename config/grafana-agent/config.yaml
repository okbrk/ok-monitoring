# Grafana Agent configuration for scraping customer Prometheus health check endpoints
# This file is AUTO-GENERATED by scripts/tenant-management/generate-agent-config.sh
# Do not edit manually - changes will be overwritten

server:
  log_level: info
  http_listen_port: 12345

metrics:
  global:
    scrape_interval: 30s
    external_labels:
      platform: obs.okbrk.com

  # Per-customer scrape configurations
  # Each customer exposes /api/metrics (or custom path) with their API key auth
  configs: []
    # Configuration will be generated from PostgreSQL metrics_endpoints table
    # Example structure:
    # - name: tenant-okbrk
    #   scrape_configs:
    #     - job_name: 'okbrk-metrics'
    #       scrape_interval: 30s
    #       scheme: https
    #       metrics_path: /api/metrics
    #       authorization:
    #         credentials: obs_customer_api_key
    #       static_configs:
    #         - targets: ['customer-app.okbrk.com']
    #       relabel_configs:
    #         - target_label: tenant_id
    #           replacement: okbrk
    #   remote_write:
    #     - url: http://mimir:8080/api/v1/push
    #       headers:
    #         X-Scope-OrgID: okbrk

